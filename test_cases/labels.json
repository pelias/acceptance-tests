{
  "name": "labels",
  "priorityThresh": 10,
  "notes": [ "Ensure the 'label' property is being correctly built" ],
  "tests": [
    {
      "id": 1,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "San Francisco, San Francisco County, CA"
      },
      "expected": {
        "properties": [{
          "label": "San Francisco, CA, USA"
        }]
      }
    },
    {
      "id": 2,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "30 West 26th Street, Manhattan, NY"
      },
      "expected": {
        "properties": [{
          "label": "30 West 26th Street, Manhattan, New York, NY, USA"
        }]
      }
    },
    {
      "id": 3,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "New South Wales, Australia"
      },
      "expected": {
        "properties": [{
          "label": "New South Wales, Australia"
        }]
      }
    },
    {
      "id": 4,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "California, CA"
      },
      "expected": {
        "properties": [{
          "label": "California, USA"
        }]
      }
    },
    {
      "id": 5,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "West Bengal, India"
      },
      "expected": {
        "properties": [{
          "label": "West Bengal, India"
        }]
      }
    },
    {
      "id": 6,
      "status": "fail",
      "issue": [
        "https://github.com/pelias/pelias/issues/294",
        "https://github.com/pelias/pelias/issues/428"
      ],
      "description": [
        "The WOF record expected in the results has no popularity/population data,",
        "so there is nothing to help boost it to the top, especially since we don't boost admin matching enough.",
        "libpostal doesn't recognize this as a region"
      ],
      "user": "missinglink",
      "in": {
        "text": "North West, Singapore"
      },
      "expected": {
        "properties": [{
          "label": "North West, Singapore"
        }]
      }
    },
    {
      "id": 7,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "Arbil, Iraq"
      },
      "expected": {
        "properties": [{
          "label": "Arbil, Iraq"
        }]
      }
    },
    {
      "id": 8,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "Madrid, Spain"
      },
      "expected": {
        "properties": [{
          "label": "Madrid, Spain"
        }]
      }
    },
    {
      "id": 9,
      "status": "fail",
      "issue": "https://github.com/pelias/pelias/issues/292",
      "description": [
        "Dungannon is showing up as a region, when it should be a locality.",
        "The label is also generated incorrectly given the information available to it."
      ],
      "user": "missinglink",
      "in": {
        "text": "1 Main St, Dungannon, United Kingdom"
      },
      "expected": {
        "properties": [{
          "label": "1 Main St, Dungannon, United Kingdom"
        }]
      }
    },
    {
      "id": 10,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "Hackney City Farm, Haggerston, Greater London"
      },
      "expected": {
        "properties": [{
          "label": "Hackney City Farm, London, England, United Kingdom"
        }]
      }
    },
    {
      "id": 11,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "1 Grolmanstraße, Berlin, Germany"
      },
      "expected": {
        "properties": [{
          "label": "Grolmanstraße 1, Berlin, Germany"
        }]
      }
    },
    {
      "id": 12,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "New Zealand"
      },
      "expected": {
        "properties": [{
          "label": "New Zealand"
        }]
      }
    },
    {
      "id": 13,
      "status": "pass",
      "user": "missinglink",
      "in": {
        "text": "McDonald's, Central Singapore, Singapore"
      },
      "expected": {
        "properties": [{
          "label": "McDonald's, Singapore, Singapore"
        }]
      }
    },
    {
      "id": 14,
      "status": "pass",
      "user": "julian",
      "in": {
        "text": "France"
      },
      "expected": {
        "properties": [{
          "label": "France"
        }]
      }
    },
    {
      "id": 15,
      "status": "pass",
      "description": "geonnames localadmin records should not have borough or locality component in label",
      "issue": "https://github.com/pelias/wof-admin-lookup/issues/49",
      "user": "julian",
      "in": {
        "text": "city of new york",
        "sources": "geonames",
        "layers": "localadmin"
      },
      "expected": {
        "properties": [{
          "label": "City of New York, NY, USA"
        }]
      }
    },
    {
      "id": 16,
      "status": "fail",
      "description": "geonames country records should not have duplicate country in the label",
      "issue": "https://github.com/pelias/wof-admin-lookup/issues/49",
      "user": "julian",
      "in": {
        "text": "china",
        "sources": "geonames",
        "layers": "country"
      },
      "expected": {
        "properties": [{
          "label": "People's Republic of China"
        }]
      }
    },
    {
      "id": 17,
      "status": "pass",
      "description": "locality in US dependency should have dependency as least granular field",
      "issue": "https://github.com/pelias/api/issues/628",
      "user": "trescube",
      "in": {
        "text": "bayamon, pr",
        "sources": "wof",
        "layers": "locality"
      },
      "expected": {
        "properties": [
          {
            "label": "Bayamón, PR"
          }
        ]
      }
    },
    {
      "id": 18,
      "status": "pass",
      "description": "locality in US dependency should have dependency as least granular field",
      "issue": "https://github.com/pelias/api/issues/628",
      "user": "trescube",
      "in": {
        "text": "aasu, as",
        "sources": "wof",
        "layers": "locality"
      },
      "expected": {
        "properties": [
          {
            "label": "Aasu, AS"
          }
        ]
      }
    },
    {
      "id": 19,
      "status": "pass",
      "description": "locality in non-US dependency should still include country",
      "issue": "https://github.com/pelias/labels/issues/5",
      "user": "trescube",
      "in": {
        "text": "George Hill, Anguilla",
        "sources": "wof",
        "layers": "locality",
        "boundary.country": "GBR"
      },
      "expected": {
        "properties": [
          {
            "label": "George Hill, Anguilla"
          }
        ]
      }
    },
    {
      "id": 20,
      "status": "pass",
      "description": "locality in non-US dependency should still include country",
      "issue": "https://github.com/pelias/labels/issues/5",
      "user": "trescube",
      "in": {
        "text": "Tórshavn faroe islands",
        "sources": "wof",
        "layers": "locality"
      },
      "expected": {
        "properties": [
          {
            "label": "Tórshavn, Faroe Islands"
          }
        ]
      }
    },
    {
      "id": 21,
      "status": "pass",
      "description": "locality in non-US dependency should still include country",
      "issue": "https://github.com/pelias/labels/issues/5",
      "user": "trescube",
      "in": {
        "text": "Hog Bay Bermuda",
        "sources": "wof",
        "layers": "locality"
      },
      "expected": {
        "properties": [
          {
            "label": "Hog Bay, Bermuda"
          }
        ]
      }
    },
    {
      "id": 22,
      "status": "pass",
      "description": "locality in non-US dependency should still include country",
      "issue": "https://github.com/pelias/labels/issues/5",
      "user": "trescube",
      "in": {
        "text": "Adamstown, Pitcairn Islands",
        "sources": "wof",
        "layers": "locality"
      },
      "expected": {
        "properties": [
          {
            "label": "Adamstown, Pitcairn Islands"
          }
        ]
      }
    },
    {
      "id": 22,
      "status": "pass",
      "description": "non-US dependency should still include the parent country",
      "issue": "https://github.com/pelias/labels/issues/5",
      "user": "trescube",
      "in": {
        "text": "Bermuda",
        "sources": "wof",
        "layers": "dependency"
      },
      "expected": {
        "properties": [
          {
            "label": "Bermuda"
          }
        ]
      }
    }
  ]
}
